<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main.html}">

<div layout:fragment="content">
    <div th:insert="modal.html"></div>



    <table class="table table-striped table-hover mt-3">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal">ADD NEW+</button>
        <thead>
        <tr>
            <td>ID</td>
            <td>Name</td>
            <td>Calories(Cal)</td>
            <td>Amount</td>
            <td>Price(KZT)</td>
            <td>Edit</td>
            <td>Delete</td>

        </tr>
        </thead>
        <tbody>

        <tr th:each="food : ${food}">
            <td th:text="${food.id}"></td>
            <td th:text="${food.name}"></td>
            <td th:text="${food.calories}"></td>
            <td th:text="${food.amounts}"></td>
            <td th:text="${food.price}"></td>
<!--            <td>-->
<!--                <span th:if="${car.country!=null}" th:text="${car.country.name + '/' + car.country.code}"></span>-->
<!--                <i class="text-secondary" th:if="${car.country==null}">UNKNOWN</i>-->
<!--            </td>-->
            <td>
                <button type="button" class="btn btn-warning btn-sm"
                        data-bs-toggle="modal"
                        th:attr="data-bs-target='#editModal__' + ${food.id}">
                    Edit
                </button>

            </td>
            <td><form method="post"  action="/delete-food">
                <input type="hidden" name="foodId" th:value="${food.id}"/>
                <button class="btn btn-danger btn-sm">Delete</button>
            </form></td>
            <td th:replace="modal-edit :: editModal(${food})"></td>
        </tr>
        </tbody>
    </table>

</div>
<nav aria-label="Pagination navigation" class="mt-4">
    <ul class="pagination justify-content-center">

        <!-- Переход на предыдущую страницу -->
        <!-- Будет заблокирована возможность перейти на предыдущую страницу, если открыта первая страница. (Не забываем о том, что нумерация страниц начинается с нуля) -->
        <li th:class="${currentPage == 0 ? 'page-item disabled' : 'page-item'}">
            <!-- Данная ссылка (кнопка) будет загружать предыдущую страницу -->
            <a class="page-link" th:href="@{'/?page=' + ${currentPage - 1} + '&size=' + ${pageSize}}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        <!-- Горизонтальный список всех страниц -->
        <li th:each="pageNumber : ${pageNumbers}" class="page-item">
            <!-- Будет загружена та страница, на номер которой Вы нажмете -->
            <!-- Текущая страница будет выделена -->
            <a th:class="${pageNumber == currentPage ? 'page-link active' : 'page-link'}" th:href="@{'/?page=' + ${pageNumber} + '&size=' + ${pageSize}}" th:text="${pageNumber + 1}"></a>
        </li>

        <!-- Переход на следующую страницу -->
        <!-- Будет заблокирована возможность перейти на следующую страницу, если открыта последняя страница. (Последняя страница имеет номер N-1) -->
        <li th:class="${currentPage == totalPages - 1 ? 'page-item disabled' : 'page-item'}">
            <!-- Данная ссылка (кнопка) будет загружать следующую страницу -->
            <a class="page-link" th:href="@{'/?page=' + ${currentPage + 1} + '&size=' + ${pageSize}}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</html>